# IMPORTANT - PLEASE TEST: Sprint 5 Features + Bug Fixes

## COMPLETE FEATURE LIST (Quick Summary)

### Core Features (Sprint 5)
- ‚úÖ Snake Quiz Game - Phaser-based game where snake eats colored apples matching quiz answers
- ‚úÖ Dynamic grid sizing (10√ó10 to 20√ó20 based on question count)
- ‚úÖ 5-second pause overlay between questions
- ‚úÖ Safe spawn zones (apples won't spawn near snake head)
- ‚úÖ Arrow keys + WASD controls
- ‚úÖ Question panel with colored answer options
- ‚úÖ Public Games Discovery system at /discover with filters
- ‚úÖ Search filter (by game title)
- ‚úÖ Subject filter (English, Math, Science, History, Language, General)
- ‚úÖ Game Mode filter (Traditional, Tower Defense, Snake)
- ‚úÖ Sort by Newest or Most Played
- ‚úÖ PublicGameCard component with game metadata and badges
- ‚úÖ Separate Active and Public Discovery toggles in game edit UI
- ‚úÖ Database fields: active (draft/active) and isPublic (discoverable)

### Hotfixes & Improvements (Latest Session)
- ‚úÖ Added game mode dropdown to game creation page (Traditional, Tower Defense, Snake)
- ‚úÖ Added game mode dropdown to game edit page
- ‚úÖ Fixed dashboard game cards showing wrong icon (always showed tower defense)
- ‚úÖ Fixed Play button routing to wrong game type (now checks gameMode field)
- ‚úÖ Added exit button to Snake game (top left, red, navigates back)
- ‚úÖ Repositioned Snake game UI (score top right, exit top left)
- ‚úÖ Implemented /teacher/discover page with full public games functionality
- ‚úÖ Created /student/discover page with same functionality
- ‚úÖ Fixed SlidingSidebar to use dynamic role-based routes (/student or /teacher)
- ‚úÖ Fixed public game access - no class membership required for public games
- ‚úÖ Added console.log debugging to getPublicGames for troubleshooting

## OVERVIEW

This sprint includes TWO major features: (1) A Snake Quiz Game and (2) Public Games Discovery system. The Snake Quiz is a Phaser-based game where players control a snake that eats colored apples matching multiple-choice answers, with dynamic grid sizing, 5-second pauses between questions, and safe spawn zones. The Public Games Discovery system allows teachers to make their games publicly discoverable through a library at /discover with advanced filtering (search, subject, game mode, sort by newest/most played). Teachers now have two separate toggles in the edit UI: one for Active/Draft status and another for Public Discovery visibility, giving fine-grained control over game visibility.

================================================================================
## SNAKE QUIZ GAME - QUICK OVERVIEW
================================================================================

### What Is It?
A Phaser-based quiz game where you play as a snake. Four colored apples appear on the grid (red, green, yellow, blue) matching the four multiple-choice answers. Eat the correct apple to advance!

### Key Features:
- Dynamic grid sizing based on question count (scales from 10√ó10 to 20√ó20)
- 5-second pause overlay between questions ("PAUSED - Read the question!")
- Safe spawn zones (apples won't spawn within 3 cells of snake head)
- Arrow keys or WASD controls
- Centered square game area with proper depth layering
- Question panel on the left side showing current question and options

### How to Test:
1. Create a game and select "Snake Quiz" as the game mode (during game creation)
2. Navigate to the game via share code or direct link
3. Use arrow keys or WASD to move the snake
4. Eat the colored apple matching the correct answer
5. Watch for the 5-second pause overlay between questions
6. Complete all questions to finish the game

### Technical Highlights:
- File: lib/phaser/SnakeScene.ts (575+ lines)
- Dynamic GRID_SIZE calculation fills screen horizontally
- Manhattan distance algorithm prevents instant death from spawning
- Depth layering (1000/1001) ensures pause text always visible
- Grid offsets (gameOffsetX, gameOffsetY) center the playable area

================================================================================
## PUBLIC GAMES DISCOVERY - HOW TO TEST (STEP BY STEP)
================================================================================

### PART 1: Set Up a Public Game

1. Start your dev server (npm run dev) and go to http://localhost:3000

2. Log in as a TEACHER account
   - If you don't have one, sign up at /signup

3. Create a game (if you don't have one already):
   - Dashboard ‚Üí Click on a class ‚Üí "Create Game" button
   - Upload a PDF ‚Üí Generate quiz ‚Üí Publish game

4. Edit the game to make it public:
   - Dashboard ‚Üí Click on your class ‚Üí Find a game ‚Üí Click "Edit"

5. In the Game Settings section, you'll see TWO toggles:
   - Toggle #1: "Active" - Turn this ON (green)
     ‚îî‚îÄ This makes the game active (not a draft)
   - Toggle #2: "Public Discovery" - Turn this ON (green)
     ‚îî‚îÄ This makes the game visible in public discovery

6. Click "Save Game" button at the bottom

7. IMPORTANT: Both toggles must be ON (green) for the game to appear in discovery!

### PART 2: Test the Discovery Page

8. Navigate to http://localhost:3000/discover
   - You should see your public game displayed in a card

9. Test the FILTERS (left sidebar):

   a) SEARCH:
      - Type part of your game title in the search box
      - The game should appear if it matches

   b) SUBJECT FILTER:
      - Click the "Subject" dropdown
      - Select a subject (English, Math, Science, History, Language, General)
      - Only games with that subject should appear

   c) GAME MODE FILTER:
      - Click the "Game Mode" dropdown
      - Select a mode (Traditional Quiz, Tower Defense, Snake Quiz)
      - Only games with that mode should appear

   d) SORT BY:
      - Click "Sort By" dropdown
      - Toggle between "Newest" and "Most Played"
      - Games should reorder accordingly

   e) CLEAR FILTERS:
      - Click "Clear Filters" button
      - All filters should reset to default

10. Test the GAME CARD:
    - You should see:
      ‚îî‚îÄ Game icon/image (üêç for Snake, üè∞ for Tower Defense, üìù for Traditional)
      ‚îî‚îÄ Game title and description
      ‚îî‚îÄ Subject badge (colored: purple=English, blue=Math, green=Science, etc.)
      ‚îî‚îÄ Game mode badge (orange)
      ‚îî‚îÄ Teacher name and school
      ‚îî‚îÄ Number of questions
      ‚îî‚îÄ Number of times played
      ‚îî‚îÄ "Play Now" button

11. Click "PLAY NOW" button:
    - For Snake games: should route to /play/snake?gameId={id}
    - For Tower Defense: should route to /play/td?gameId={id}
    - For Traditional: should route to /play/phaser/{shareCode}

### PART 3: Test Toggle Combinations

12. Go back to the game edit page and test different toggle combinations:

    Scenario A: Active=ON, Public Discovery=OFF
    ‚îú‚îÄ Game is playable by class members
    ‚îî‚îÄ Game does NOT appear in /discover

    Scenario B: Active=OFF, Public Discovery=ON
    ‚îú‚îÄ Game is in draft mode
    ‚îî‚îÄ Game does NOT appear in /discover (requires both to be ON)

    Scenario C: Active=ON, Public Discovery=ON
    ‚îú‚îÄ Game is playable by class members
    ‚îî‚îÄ Game APPEARS in /discover ‚úì

    Scenario D: Active=OFF, Public Discovery=OFF
    ‚îú‚îÄ Game is in draft mode
    ‚îî‚îÄ Game does NOT appear in /discover

13. Verify the database changes:
    - Open Prisma Studio: npx prisma studio
    - Navigate to "Game" model
    - Find your game
    - Verify that:
      ‚îî‚îÄ "active" field matches the Active toggle
      ‚îî‚îÄ "isPublic" field matches the Public Discovery toggle

### PART 4: Test Edge Cases

14. Test with NO public games:
    - Turn off both toggles on all games
    - Visit /discover
    - Should see "No Games Found" message with üîç icon

15. Test with multiple games:
    - Create 3-5 games with different subjects and game modes
    - Make them all public (both toggles ON)
    - Visit /discover
    - Test that filtering works correctly with multiple results

16. Test the count display:
    - Bottom of game cards area should show: "X games found"
    - This should update as you apply filters

================================================================================
## IN-DEPTH EXPLANATION - TECHNICAL DETAILS
================================================================================

### SNAKE QUIZ GAME - FILES CREATED

1. lib/phaser/SnakeScene.ts (575+ lines)
   ‚îî‚îÄ Core Phaser game scene for Snake Quiz

   Key Implementation Details:
   - Lines 1-50: Imports, interfaces, and class setup
   - Lines 51-125: Grid sizing calculations (dynamic based on question count)
   - Lines 126-180: create() method - initializes game, UI, and snake
   - Lines 181-250: startRound() - spawns apples, shows question
   - Lines 251-320: update() - game loop, snake movement, collision detection
   - Lines 321-380: spawnApple() - safe spawn zones with Manhattan distance
   - Lines 381-450: showPauseOverlay() - 5-second countdown between questions
   - Lines 451-520: handleCorrectAnswer() / handleWrongAnswer()
   - Lines 521-575: Helper methods and game over logic

   Critical Features:
   - Dynamic grid: gridWidth/gridHeight scale from 10√ó10 to 20√ó20 based on question count
   - Safe spawn: isTooCloseToSnakeHead() uses Manhattan distance < 3 cells
   - Depth management: Pause overlay at depth 1000, text at 1001
   - Centered rendering: gameOffsetX and gameOffsetY position the grid
   - Color mapping: Red‚Üí0, Green‚Üí1, Yellow‚Üí2, Blue‚Üí3 for answer options

2. components/game/SnakeGame.tsx (120+ lines)
   ‚îî‚îÄ React wrapper component for Phaser Snake game
   ‚îî‚îÄ Same pattern as TowerDefenseGame.tsx
   ‚îî‚îÄ Handles dynamic Phaser import and scene initialization

3. app/play/snake/page.tsx (150+ lines)
   ‚îî‚îÄ Route page for playing Snake games
   ‚îî‚îÄ Uses ?gameId query parameter (matches Tower Defense pattern)
   ‚îî‚îÄ Verifies gameMode === 'SNAKE' before rendering

### PUBLIC GAMES DISCOVERY - FILES CREATED

4. app/discover/page.tsx (204 lines)
   ‚îî‚îÄ Main public games discovery page
   ‚îî‚îÄ Client component with filters and game grid

   Key Features:
   - Lines 15-19: Filter state (subject, gameMode, search, sortBy)
   - Lines 22-43: useEffect fetches games whenever filters change
   - Lines 76-159: Filter sidebar (Search, Subject, Game Mode, Sort By, Clear)
   - Lines 163-198: Games grid with loading/error/empty states
   - Lines 191-195: Maps games to PublicGameCard components

5. components/discover/PublicGameCard.tsx (128 lines)
   ‚îî‚îÄ Individual game card component

   Key Features:
   - Lines 6-26: TypeScript interface for game props
   - Lines 29-42: Constants for labels and colors
   - Lines 47-56: handlePlay() routes based on game mode
   - Lines 59-73: Game image/icon display
   - Lines 87-102: Subject and Game Mode badges
   - Lines 104-116: Metadata (teacher, school, questions, plays)
   - Lines 119-124: "Play Now" button

### FILES MODIFIED

SNAKE GAME MODIFICATIONS:

1. prisma/schema.prisma
   ‚îî‚îÄ Added SNAKE to GameMode enum
   ‚îî‚îÄ Allows games to be created with Snake Quiz mode

   Before:
   enum GameMode {
     TRADITIONAL
     TOWER_DEFENSE
   }

   After:
   enum GameMode {
     TRADITIONAL
     TOWER_DEFENSE
     SNAKE          // ‚Üê Added for Snake Quiz game
   }

PUBLIC GAMES DISCOVERY MODIFICATIONS:

2. app/actions/game.ts

   ADDITION #1: PublicGameFilters interface (Lines 473-478)
   ‚îî‚îÄ Defines filter options: subject, gameMode, search, sortBy

   ADDITION #2: getPublicGames() function (Lines 481-593)
   ‚îî‚îÄ Server action to fetch public games with filters

   Implementation Details:
   - Lines 509-512: WHERE clause requires isPublic=true AND active=true
   - Lines 515-530: Applies filters (subject, gameMode, search)
   - Lines 533-535: Builds orderBy (newest or mostPlayed)
   - Lines 538-564: Prisma query with includes (teacher, quiz, session count)
   - Lines 567-586: Transforms data to match interface
   - Line 563: Limits results to 50 games for performance

   MODIFICATION #1: updateGame() function signature (Lines 259-268)
   ‚îî‚îÄ Added isPublic?: boolean parameter
   ‚îî‚îÄ Allows updating both active AND isPublic fields
   ‚îî‚îÄ Comment updated to reflect "public visibility"

3. app/teacher/games/edit/page.tsx

   MODIFICATION #1: State variables (Lines 44-45)
   BEFORE:
   - const [isPublic, setIsPublic] = useState(true);

   AFTER:
   - const [isActive, setIsActive] = useState(true);
   - const [isPublic, setIsPublic] = useState(false);

   ‚îî‚îÄ Separated active status from public visibility

   MODIFICATION #2: Loading game data (Lines 73-80)
   BEFORE:
   - setIsPublic(game.active);

   AFTER:
   - setIsActive(game.active);
   - setIsPublic(game.isPublic);

   ‚îî‚îÄ Now loads both fields correctly from database

   MODIFICATION #3: Saving game data (Lines 148-159)
   BEFORE:
   - active: isPublic,

   AFTER:
   - active: isActive,
   - isPublic: isPublic,

   ‚îî‚îÄ Saves both fields separately

   MODIFICATION #4: UI Toggle Section (Lines 323-360)
   BEFORE:
   - Single "Public" toggle

   AFTER:
   - Two separate toggles:

   Toggle #1: Active (Lines 324-341)
   ‚îú‚îÄ Label: "Active"
   ‚îú‚îÄ Subtitle: "Game is active/draft"
   ‚îú‚îÄ Controls: isActive state
   ‚îî‚îÄ Database field: active

   Toggle #2: Public Discovery (Lines 342-359)
   ‚îú‚îÄ Label: "Public Discovery"
   ‚îú‚îÄ Subtitle: "Visible in discovery/Class only"
   ‚îú‚îÄ Controls: isPublic state
   ‚îî‚îÄ Database field: isPublic

### DATABASE FIELDS USED

From prisma/schema.prisma:

Game model fields:
- active: Boolean (default: true)
  ‚îî‚îÄ Controls if game is active or draft
  ‚îî‚îÄ Must be true for students to play

- isPublic: Boolean (default: false)
  ‚îî‚îÄ Controls if game appears in public discovery
  ‚îî‚îÄ Must be true (along with active) to appear in /discover

### ROUTING LOGIC

PublicGameCard.tsx handlePlay() function (Lines 47-56):

if (game.gameMode === 'SNAKE')
  ‚Üí router.push(`/play/snake?gameId=${game.id}`)

else if (game.gameMode === 'TOWER_DEFENSE')
  ‚Üí router.push(`/play/td?gameId=${game.id}`)

else (TRADITIONAL)
  ‚Üí router.push(`/play/phaser/${game.shareCode}`)

### FILTER LOGIC

app/actions/game.ts getPublicGames() (Lines 507-530):

Base WHERE clause:
- isPublic: true
- active: true

Applied filters:
- Subject filter (Lines 515-518):
  ‚îî‚îÄ where.quiz = { subject: filters.subject }

- Game Mode filter (Lines 521-523):
  ‚îî‚îÄ where.gameMode = filters.gameMode

- Search filter (Lines 525-529):
  ‚îî‚îÄ where.title = { contains: filters.search, mode: 'insensitive' }

Sort options (Lines 533-535):
- "mostPlayed": [{ gameSessions: { _count: 'desc' } }]
- "newest": [{ createdAt: 'desc' }]

### STYLING & COLORS

Subject Badge Colors (PublicGameCard.tsx Lines 35-42):
- ENGLISH: purple-100 bg, purple-700 text, purple-300 border
- MATH: blue-100 bg, blue-700 text, blue-300 border
- SCIENCE: green-100 bg, green-700 text, green-300 border
- HISTORY: orange-100 bg, orange-700 text, orange-300 border
- LANGUAGE: pink-100 bg, pink-700 text, pink-300 border
- GENERAL: gray-100 bg, gray-700 text, gray-300 border

Game Mode Badge (PublicGameCard.tsx Line 99):
- Orange background (#fd9227)
- White text
- Red border (#730f11)

### KEY DESIGN DECISIONS

1. BOTH active AND isPublic must be true
   ‚îî‚îÄ Prevents draft games from appearing publicly
   ‚îî‚îÄ Gives teachers granular control

2. Query limit of 50 games (Line 563)
   ‚îî‚îÄ Prevents performance issues
   ‚îî‚îÄ Can be increased if needed

3. Case-insensitive search (Line 528)
   ‚îî‚îÄ Better UX, finds "math" and "Math"

4. Separate routing for each game mode
   ‚îî‚îÄ Snake uses ?gameId query param
   ‚îî‚îÄ Tower Defense uses ?gameId query param
   ‚îî‚îÄ Traditional uses /[shareCode] dynamic route

5. Empty states for better UX
   ‚îî‚îÄ No games: "No Games Found" with üîç
   ‚îî‚îÄ Loading: "Loading games..." spinner
   ‚îî‚îÄ Error: Red error box

### DEPENDENCIES

No new npm packages were installed. Uses existing:
- Next.js 15 (App Router)
- Prisma (database queries)
- React hooks (useState, useEffect)
- next/navigation (useRouter)

### POTENTIAL IMPROVEMENTS (Future)

1. Pagination for >50 games
2. Filter by rating or popularity
3. Game preview modal
4. Teacher profile pages
5. "Save to Favorites" feature
6. Analytics on discovery page views
7. Featured games section
8. Recently viewed games
9. Filter by difficulty level
10. Multi-select filters (e.g., Math AND Science)

================================================================================
## TESTING CHECKLIST
================================================================================

Basic Functionality:
[ ] Can see discover page at /discover
[ ] Can see public games in grid layout
[ ] Game cards display all metadata correctly
[ ] "Play Now" button routes to correct game page

Filters:
[ ] Search filter works
[ ] Subject filter works
[ ] Game Mode filter works
[ ] Sort by Newest works
[ ] Sort by Most Played works
[ ] Clear Filters resets everything
[ ] Multiple filters can be applied together

Edit Page Toggles:
[ ] Active toggle changes game.active field
[ ] Public Discovery toggle changes game.isPublic field
[ ] Both toggles save correctly
[ ] Toggling both ON makes game appear in discovery
[ ] Toggling either OFF removes game from discovery

Edge Cases:
[ ] No public games shows empty state
[ ] Filter with no results shows "No Games Found"
[ ] Games with no description still display correctly
[ ] Games without school name still display correctly

Database Verification:
[ ] Check Prisma Studio to confirm active field updates
[ ] Check Prisma Studio to confirm isPublic field updates

================================================================================
## NEW FEATURES & BUG FIXES (LATEST SESSION)
================================================================================

### GAME MODE SELECTION

FEATURE: Teachers can now select game mode during game creation and editing

Files Modified:
1. app/teacher/game-settings/page.tsx (Lines 47, 126-142)
   - Added gameMode state variable (defaults to TRADITIONAL)
   - Added dropdown UI between description and privacy settings
   - Passes gameMode to createGame() server action

2. app/teacher/games/edit/page.tsx (Lines 47, 82, 158, 327-337)
   - Added gameMode state variable
   - Loads gameMode from existing game
   - Saves gameMode when updating
   - Added identical dropdown UI

How to Test:
1. Create a new game ‚Üí See "Game Mode" dropdown with üìù üè∞ üêç options
2. Select "Snake Quiz" ‚Üí Publish game ‚Üí Verify gameMode saved
3. Edit existing game ‚Üí Change game mode ‚Üí Save ‚Üí Verify update

### DASHBOARD ICON FIX

BUG FIX: Game cards always showed tower defense icon regardless of actual game mode

Files Modified:
1. components/dashboard/GameCard.tsx (Lines 5, 14, 27, 134-149)
   - Added GameMode import from @prisma/client
   - Added gameMode prop to interface
   - Updated icon rendering to check gameMode:
     * SNAKE ‚Üí üêç emoji
     * TOWER_DEFENSE ‚Üí tower-defense-game-icon.png
     * TRADITIONAL ‚Üí üìù emoji

2. components/dashboard/GamesView.tsx (Lines 20, 62, 83-89)
   - Added gameMode to Game interface
   - Included gameMode in data mapping
   - Updated handlePlay routing logic:
     * SNAKE ‚Üí /play/snake?gameId={id}
     * TOWER_DEFENSE ‚Üí /play/td?gameId={id}
     * Default ‚Üí /play/phaser/{shareCode}

3. app/actions/quiz.ts (Lines 32, 58, 95)
   - Added gameMode to return interface
   - Added gameMode: true to Prisma select
   - Included gameMode in mapped data

How to Test:
1. Dashboard ‚Üí Create Snake game ‚Üí Card shows üêç
2. Dashboard ‚Üí Create TD game ‚Üí Card shows üè∞
3. Dashboard ‚Üí Create Traditional game ‚Üí Card shows üìù
4. Click Play on Snake game ‚Üí Routes to /play/snake
5. Click Play on TD game ‚Üí Routes to /play/td

### SNAKE GAME UI IMPROVEMENTS

FEATURE: Added exit button and repositioned score display

File Modified:
lib/phaser/SnakeScene.ts (Lines 110-145, 185-190)

Changes:
- Added red exit button (top left at 70, 30)
  * Dimensions: 120x40 pixels
  * Color: 0xff4444 (red)
  * Hover color: 0xcc3333 (darker red)
  * Action: window.history.back()

- Repositioned score text (top right of question panel)
  * Position: (availableWidth - 20, 20)
  * Origin: (1, 0) for right-alignment
  * No longer overlaps with game title

How to Test:
1. Play Snake game ‚Üí See red "Exit" button top left
2. Hover over exit button ‚Üí Color darkens
3. Click exit button ‚Üí Returns to previous page
4. Score appears at top right of black question panel

### DISCOVER PAGE IMPLEMENTATION

FEATURE: Both teachers and students can now browse public games at role-based routes

Files Created:
1. app/teacher/discover/page.tsx (188 lines)
   - Replaced "Coming soon" placeholder
   - Full public games discovery with filters
   - Uses TeacherPageLayout wrapper

2. app/student/discover/page.tsx (226 lines)
   - New page for students
   - Same functionality as teacher version
   - Uses Navbar + SlidingSidebar layout

How to Test:
1. Login as teacher ‚Üí Navigate to /teacher/discover ‚Üí See public games
2. Login as student ‚Üí Navigate to /student/discover ‚Üí See same games
3. Test all filters (search, subject, game mode, sort)
4. Click "Play Now" on any game ‚Üí Game loads correctly

### SIDEBAR ROUTING FIX

BUG FIX: Sidebar was hardcoded to /teacher routes, breaking student navigation

File Modified:
components/shared/SlidingSidebar.tsx (Lines 17-18, 25-40, 42-49)

Changes:
- Added role detection: const isStudent = pathname.startsWith('/student')
- Added dynamic prefix: const rolePrefix = isStudent ? '/student' : '/teacher'
- Updated all navigation hrefs to use rolePrefix:
  * Dashboard: `${rolePrefix}/dashboard`
  * Discover: `${rolePrefix}/discover`
  * Shop: `${rolePrefix}/shop`
  * Games: `${rolePrefix}/games`
  * Upload: `${rolePrefix}/upload`

How to Test:
1. Login as student ‚Üí Click Discover ‚Üí Goes to /student/discover ‚úì
2. Login as teacher ‚Üí Click Discover ‚Üí Goes to /teacher/discover ‚úì
3. Test all sidebar links for both roles

### PUBLIC GAME ACCESS FIX

BUG FIX: Public games required class membership to play

File Modified:
app/actions/game.ts getGameWithQuiz() (Lines 221-224)

Changes:
- Added early return for public games:
  if (game.isPublic && game.active) {
    return { success: true, data: { game } };
  }
- Moved class membership check after public check
- Public games now accessible to anyone

How to Test:
1. Create public game (Active=ON, Public Discovery=ON)
2. Share link with student NOT in the class
3. Student clicks link ‚Üí Game loads ‚úì (previously showed "join class" error)

### DEBUGGING IMPROVEMENTS

FEATURE: Added console logging to troubleshoot discover page issues

File Modified:
app/actions/game.ts getPublicGames() (Lines 570-579)

Added:
console.log('üîç Public Games Query Results:', {
  totalFound: games.length,
  games: games.map(g => ({
    id: g.id,
    title: g.title,
    gameMode: g.gameMode,
    active: g.active,
    isPublic: g.isPublic,
  }))
});

How to Use:
1. Visit /teacher/discover or /student/discover
2. Check terminal console for "üîç Public Games Query Results"
3. Verify which games are being returned
4. Debug why games might not appear

================================================================================
## TROUBLESHOOTING
================================================================================

Issue: Game doesn't appear in /discover
Solution:
- Check that BOTH Active AND Public Discovery toggles are ON (green)
- Verify in Prisma Studio that active=true AND isPublic=true

Issue: Filters don't work
Solution:
- Clear browser cache and refresh
- Check browser console for errors
- Verify dev server is running

Issue: "Play Now" button doesn't work
Solution:
- Check that the game has a valid shareCode (for Traditional)
- Check that the game has a valid ID (for Snake/TD)
- Verify game mode is set correctly in database

Issue: Can't save toggles
Solution:
- Check browser console for errors
- Verify you're logged in as a teacher
- Check that you own the game you're editing

Issue: Student discover button doesn't work
Solution:
- Fixed in latest session (SlidingSidebar now uses dynamic routes)
- Should now route to /student/discover correctly
- Clear cache and refresh if still not working

Issue: Wrong game icon showing in dashboard
Solution:
- Fixed in latest session (GameCard now checks gameMode prop)
- Make sure gameMode is saved when creating/editing game
- Check Prisma Studio to verify gameMode field is correct

Issue: Play button goes to wrong game
Solution:
- Fixed in latest session (GamesView now routes based on gameMode)
- Verify gameMode field is correct in database
- Test each game mode separately

Issue: Public game requires class membership
Solution:
- Fixed in latest session (getGameWithQuiz checks isPublic first)
- Make sure game has isPublic=true AND active=true
- Try accessing game in incognito window

================================================================================
## UPDATED TESTING CHECKLIST (NEW FEATURES)
================================================================================

Game Mode Selection:
[ ] Game creation page shows game mode dropdown
[ ] Can select Traditional, Tower Defense, or Snake
[ ] Game mode saves correctly when publishing
[ ] Game edit page shows current game mode
[ ] Can change game mode and save successfully

Dashboard Icons & Routing:
[ ] Snake games show üêç emoji in dashboard
[ ] Tower Defense games show tower icon
[ ] Traditional games show üìù emoji
[ ] Play button on Snake game ‚Üí /play/snake?gameId=X
[ ] Play button on TD game ‚Üí /play/td?gameId=X
[ ] Play button on Traditional game ‚Üí /play/phaser/{code}

Snake Game UI:
[ ] Exit button appears at top left (red)
[ ] Exit button hover effect works
[ ] Exit button returns to previous page
[ ] Score displays at top right of question panel
[ ] No UI overlap issues

Discover Pages:
[ ] /teacher/discover loads and shows public games
[ ] /student/discover loads and shows same games
[ ] All filters work (search, subject, game mode, sort)
[ ] Game cards display correctly
[ ] Play Now button works from discover page

Sidebar Navigation:
[ ] Teacher sidebar Discover ‚Üí /teacher/discover
[ ] Student sidebar Discover ‚Üí /student/discover
[ ] All sidebar links work for both roles
[ ] Active state highlights correctly

Public Game Access:
[ ] Public games accessible without class membership
[ ] Private games still require class membership
[ ] Public games work for logged-out users
[ ] Error messages appropriate for each case

================================================================================
END OF DOCUMENTATION
================================================================================
